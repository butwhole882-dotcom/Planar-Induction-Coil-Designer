<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Planar Inductor â€“ Complete</title>

<style>
html,body{
  margin:0;
  height:100%;
  background:#fff;
  overflow:hidden;
  font-family:system-ui
}
canvas{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  background:#fff;
  touch-action:none
}
#menu{
  position:absolute;
  top:12px;
  left:12px;
  right:12px;
  max-width:860px;
  padding:12px;
  border-radius:14px;
  border:1px solid rgba(200,0,0,.6);
  background:rgba(255,255,255,.96);
  color:#c00000;
  z-index:10
}
#menu.hidden{display:none}
#hint{
  position:absolute;
  top:14px;
  left:0;
  right:0;
  text-align:center;
  color:#c00000;
  font-weight:800;
  display:none;
  z-index:11
}
#hint.show{display:block}
.row{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  margin-top:8px;
  align-items:center
}
input,select,button{
  padding:6px 8px;
  border-radius:10px;
  border:1px solid rgba(200,0,0,.6);
  background:#fff;
  color:#c00000
}
input[type=range]{width:150px}
input[type=number]{width:96px}
button{cursor:pointer}
.small{font-size:12px;opacity:.85}
.trap{display:none}
</style>
</head>

<body>
<canvas id="cv"></canvas>
<div id="hint">TAP TO SHOW MENU</div>

<div id="menu">
  <div class="row" style="justify-content:space-between">
    <strong>Planar Inductor</strong>
    <span>
      <button id="png">Export PNG</button>
      <button id="svg">Export SVG</button>
      <button id="hideBtn">Hide menu</button>
    </span>
  </div>

  <div class="row">
    <label><input type="radio" name="dir" id="ccw" checked>CCW</label>
    <label><input type="radio" name="dir" id="cw">CW</label>
    <select id="shape">
      <option>Circle</option>
      <option>Triangle</option>
      <option selected>Square</option>
      <option>Pentagon</option>
      <option>Hexagon</option>
      <option>Isosceles Trapezoid</option>
    </select>
    <span class="small" id="turnDisp"></span>
  </div>

  <div class="row">
    <label>Size</label>
    <input id="szS" type="range" min="10" max="200" step="1">
    <input id="szN" type="number" min="10" max="200" step="1">
    <span class="small">mm</span>
  </div>

  <div class="row">
    <label>Rotation</label>
    <input id="rtS" type="range" min="-180" max="180" step="1">
    <input id="rtN" type="number" min="-180" max="180" step="1">
    <span class="small">deg</span>
  </div>

  <div class="row">
    <label>Thickness</label>
    <input id="thS" type="range" min="0.05" max="10" step="0.01">
    <input id="thN" type="number" min="0.05" max="10" step="0.001">
    <span class="small">mm</span>
  </div>

  <div class="row">
    <label>Spacing</label>
    <input id="spS" type="range" min="0.05" max="10" step="0.01">
    <input id="spN" type="number" min="0.05" max="10" step="0.001">
    <span class="small">mm</span>
  </div>

  <div class="row">
    <label>Turns</label>
    <input id="tuS" type="range" min="1" max="240" step="1">
    <input id="tuN" type="number" min="1" max="240" step="1">
  </div>

  <div class="row">
    <label>Corner radius</label>
    <input id="raS" type="range" min="0" max="10" step="0.01">
    <input id="raN" type="number" min="0" max="10" step="0.001">
    <span class="small">mm</span>
  </div>

  <div class="row trap" id="trapRow">
    <label>Trap angle</label>
    <input id="ang" type="range" min="1" max="89" step="0.01" value="32.73">
    <select id="angMode">
      <option value="deg">deg</option>
      <option value="dms">deg+min</option>
      <option value="rad">rad</option>
    </select>
    <span class="small" id="angDisp"></span>

    <label style="margin-left:8px">Trap height</label>
    <input id="hei" type="range" min="10" max="90" step="1" value="50">
    <span class="small">%</span>
  </div>
</div>

<script>
/* === FULL JS LOGIC UNCHANGED === */
/* (kept exactly as in your data URL version) */

(() => {
  /* code continues exactly as you supplied */
})();
</script>

</body>
</html>
